spring:
  application:
    name: role-permission

  # 数据库配置
  datasource:
    url: "jdbc:mysql://YOUR_DB_HOST:3306/rolePermission?useSSL=true&requireSSL=true&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&verifyServerCertificate=false"
    username: root
    password: ************
    driver-class-name: com.mysql.cj.jdbc.Driver

    # HikariCP 连接池配置
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      idle-timeout: 600000
      max-lifetime: 1800000
      connection-timeout: 30000
      connection-test-query: SELECT 1

  # Redis 配置
  data:
    redis:
      host: localhost
      port: 6379
      password: # 如果有密码，请填写在这里
      database: 0
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms

  # Spring Boot 配置
  output:
    ansi:
      enabled: always
  # Banner 配置
  main:
    banner-mode: console

  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 100MB

  # 邮件配置 - 阿里企业邮箱
  mail:
    host: smtp.qiye.aliyun.com
    port: 465
    username: YOUR_EMAIL@YOUR_DOMAIN.com
    password: ************
    protocol: smtp
    default-encoding: UTF-8
    properties:
      mail:
        debug: true
        smtp:
          auth: true
          ssl:
            enable: true
            trust: "*"
            protocols: TLSv1.2
          socketFactory:
            port: 465
            class: javax.net.ssl.SSLSocketFactory
            fallback: false
          starttls:
            enable: true
            required: true

# MyBatis-Plus 配置
mybatis-plus:
  # mapper.xml 文件位置
  mapper-locations: classpath*:mapper/**/*.xml
  # 实体类所在包
  type-aliases-package: com.dseven.rolepermission.entity
  # 配置
  configuration:
    # 开启驼峰命名转换
    map-underscore-to-camel-case: true
    # 打印SQL（开发环境）
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  # 全局配置
  global-config:
    # 数据库配置
    db-config:
      # 主键类型：AUTO 自增
      id-type: auto
      # 逻辑删除配置
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
      # 字段填充策略
      insert-strategy: not_null
      update-strategy: not_null
      select-strategy: not_empty

# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /

# 日志配置
logging:
  level:
    root: INFO
    com.dseven: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    # 禁用一些冗余的日志
    org.springframework.boot.autoconfigure: INFO
    org.springframework.boot.web.servlet: INFO
  pattern:
    console: "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr([%thread]){blue} %clr(%-5level){cyan} %clr(%logger{36}){magenta} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# 开发环境特定配置
debug: false

# 其他开发环境配置
---
# 自定义配置
app:
  # 应用配置
  name: Role Permission System
  version: 1.0.0

  # 安全配置
  jwt:
    secret: CHANGE_THIS_TO_A_SECURE_SECRET_KEY_AT_LEAST_32_CHARS_LONG
    expiration: 3600000  # 1小时（访问令牌）
    refresh-expiration: 604800000  # 7天（刷新令牌）

  # 跨域配置
  cors:
    allowed-origins: "http://localhost:3000,http://localhost:8080"
    allowed-methods: "GET,POST,PUT,DELETE,OPTIONS"
    allowed-headers: "*"
    allow-credentials: true
    max-age: 3600

  # 邮箱验证配置
  email:
    code-expire-minutes: 10
    send-interval-seconds: 60
    max-try-count: 3
    max-send-per-hour-per-ip: 10
    max-send-per-day-per-email: 5
    from-name: "Role Permission System"
    from-address: "YOUR_EMAIL@YOUR_DOMAIN.com"
    secret-salt: "CHANGE_THIS_TO_A_RANDOM_SECRET_STRING_IN_PROD" # 生产环境请修改